<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Rafael Orion / Blog</title>
    <description>Dev_Blog</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Func, Action e Predicate</title>
        <description>
          
          

Agora que j√° entendemos o funcionamento de um delegate, chegou a hora de falar dos seus irm√£os mais novos.

Com o objetivo de ser um tipo especifico de delegate pr√© moldados para as situa√ß√µes mais comuns o .net criou esses tres tipos, Action, Func e Predicate, 
apesar de serem baseados no delegate, eles s√£o especializa√ß√µes focadas em diferentes situa√ß√µes.

Action

Introduzido no Framework 2.0, Action √© uma especializa√ß√£o do delegate focada em fun√ß√µes sem retorno com at√© 16 par√¢metros.

O objetivo √© poupar de criar um delegate especifico para essas situa√ß√µes, com isso em vez de ter que compartilhar a assinatura do nosso delegate com todos os pontos do sistema podemos simplesmente trabalhar com uma action de forma gen√©rica.

Situado dentro da namespace System, a classe Action possui 17 sobrecargas diferentes, que v√£o de zero a 16 par√¢metros, cobrindo a maioria das situa√ß√µes! (se a sua fun√ß√£o tiver mais que 16 par√¢metros provavelmente voc√™ tem s√©rios problemas de arquitetura ;) )

Exemplo:
public void ShowMessageInPortuguese(string s1, string s2)
{
  Console.WriteLine(&quot;Bem vindo &quot; + s1 + &quot; e &quot; + s2);
}

public void Main()
{
  //Declara√ß√£o de um Action que espere 2 par√¢metros do tipo string
  Action&amp;lt;string, string&amp;gt; actionShowMessage;
	
  //Podemos declarar essa fun√ß√£o utilizando lambda
  actionShowMessage = (s1, s2) =&amp;gt; {Console.WriteLine(&quot;Hello &quot; + s1 + &quot; and &quot; + s2);}; 
	
  //Ou usando um m√©todo concreto com a assinatura compat√≠vel
  actionShowMessage += ShowMessageInPortuguese;
	
  //Executando as 2 actions atribu√≠das ao mesmo tempo
  actionShowMessage(&quot;Rafael&quot;,&quot;Orion&quot;); 
  /*Resultado:
    Hello Rafael and Orion
    Bem vindo Rafael e Orion
  */

  //Declarando uma action sem par√¢metros
  Action welcomeAction;

  //Atribuindo um comportamento √† action
  welcomeAction = () =&amp;gt; Console.WriteLine(&quot;Welcome!&quot;);

  //Executando a action
  welcomeAction(); //Welcome!
}


Assim como um Multicast Delegate (delegate sem retorno), podemos encadear m√∫ltiplos m√©todos na mesma action como vimos no exemplo acima.

Predicate

Introduzido no Framework 2.0, O predicate, √© uma especializa√ß√£o do delegate focada em fun√ß√µes com retorno booleano e que pode receber somente 1 valor como par√¢metro, geralmente utilizado para crit√©rios de valida√ß√£o.

Exemplo:
class Usuario
{
	public int Id { get; set; }
	public string Nome { get; set; }
	public string Email { get; set; }
	public bool Ativo { get; set; }
}

public void Main()
{
  var lista = new List&amp;lt;Usuario&amp;gt;(){
    new Usuario(){Id=1, Nome=&quot;Usuario 1&quot;, Email=&quot;u1@teste.com&quot;, Ativo=true},
    new Usuario(){Id=2, Nome=&quot;Usuario 2&quot;, Email=&quot;u2@teste.com&quot;, Ativo=false},
    new Usuario(){Id=3, Nome=&quot;Usuario 3&quot;, Email=&quot;u3@teste.com&quot;, Ativo=true},
    new Usuario(){Id=4, Nome=&quot;Usuario 4&quot;, Email=&quot;u4@teste.com&quot;, Ativo=false},
    new Usuario(){Id=5, Nome=&quot;Usuario 5&quot;, Email=&quot;u5@teste.com&quot;, Ativo=true},
    new Usuario(){Id=6, Nome=&quot;Usuario 6&quot;, Email=&quot;&quot;, Ativo=true},
    new Usuario(){Id=7, Nome=&quot;&quot;, Email=&quot;Usuario 7&quot;, Ativo=true},
    new Usuario(),
    new Usuario(){Id=-2, Nome=&quot;Usuario -2&quot;, Email=&quot;aaa&quot;, Ativo=true},
    null
  };

 //Criando um predicate que recebe um usu√°rio como par√¢metro e retorna um bool informando se √© valido ou n√£o
 var predicateValidUser = new Predicate&amp;lt;Usuario&amp;gt; (u =&amp;gt;
		u != null &amp;amp;&amp;amp;
		u.Id &amp;gt; 0 &amp;amp;&amp;amp;
		!string.IsNullOrEmpty(u.Nome) &amp;amp;&amp;amp;
		!string.IsNullOrEmpty(u.Email)
	);

	//Aplicando 0 predicate para filtrar os dados
	var usuariosFiltrados = lista.Where(usuario =&amp;gt; predicateValidUser(usuario)).ToList();
	
	//Utilizando uma action para exibir o resultado
	usuariosFiltrados.ForEach (ShowActiveUsers);
	
  //ou
	usuariosFiltrados.ForEach (usuario =&amp;gt;
	{
		if (usuario.Ativo)
		{
			Console.WriteLine ($&quot;({usuario.Id}) {usuario.Nome} &amp;lt;{usuario.Email}&amp;gt;&quot;);
		}
	});

}

void ShowActiveUsers (Usuario usuario)
{
	if (usuario.Ativo)
	{
		Console.WriteLine ($&quot;({usuario.Id}) {usuario.Nome} &amp;lt;{usuario.Email}&amp;gt;&quot;);
	}
}


Func

Introduzido no Framework 3.5, Func √© uma especializa√ß√£o do delegate focada em fun√ß√µes com retorno e at√© 16 par√¢metros.

Assim como o Action e o Predicate os par√¢metros n√£o necessariamente precisam ser todos do mesmo tipo.

No caso da Func, o primeiro tipos especificado obrigatoriamente ser√° o retorno da fun√ß√£o, e os demais os par√¢metros que ser√£o recebidos, no exemplo abaixo nossa func ir√° retornar um valor do tipo int e ir√° receber 2 valores, sendo o primeiro do tipo string e o segundo do tipo bool.

Func&amp;lt;int, string, bool&amp;gt; myFunc;


Exemplo:
void Main()
{
  //Declara uma func que recebe 2 strings e retorna uma string
  Func&amp;lt;string,string, string&amp;gt; funcComparation;
	
  //Atribui um m√©todo concreto a func
  funcComparation = ShowLongest;
	
  //executa a func
  var result = funcComparation(&quot;Rafael&quot;, &quot;Orion&quot;);
	
  Console.WriteLine(result); //Rafael
}

string ShowLongest(string value1, string value2)
{
  return value1.Length &amp;gt; value2.Length? value1: value2;
}



Delegate, Action, Func, Predicate ‚Ä¶ Qual devo usar?

Como podemos ver os quatro s√£o bem parecidos, basicamente o delegate seria a forma mais gen√©rica e abrangente, ja o action, func e predicate seriam um delegate pronto, cada um focado em uma situa√ß√£o especifica.


  Delegate: √â a assinatura de uma fun√ß√£o que pode receber diferentes implementa√ß√µes, podendo receber par√¢metros e retornar ou n√£o valores.
  Func: √â um tipo de delegate, obrigatoriamente retornando algum valor e podendo ter de 0 a 16 par√¢metros
  Action: Seria equivalente a uma Func por√©m obrigatoriamente sem retorno
  Predicate: Seria equivalente a uma Func mas que recebe somente um par√¢metro e obrigatoriamente deve retornar um valor booleano


Ok, mas se o delegate j√° pode fazer tudo isso, porque utilizar func, action ou predicate?

Assim como podemos somente usar um if comum em vez de um if tern√°rio, array em vez de list ou ate mesmo usar um while em vez de for, o que nos leva a fazer essas escolhas seria deixar o nosso c√≥digo mais claro e objetivo.

Func, Action e Predicate s√£o especializa√ß√µes do delegate para fins espec√≠ficos.

Se eu tenho uma fun√ß√£o que ir√° receber um delegate para executar uma valida√ß√£o e sei que o resultado sera true ou false, porque n√£o usar direto o predicate, isso j√° comunica de cara a nossa inten√ß√£o, alem de poupar algumas linhas declarando a estrutura do nosso delegate.

O mesmo vale para func e action, sem falar que muitas partes do framework como um simples foreach esperam esses tipos de dados, isso j√° seria um bom motivo para aprender seu funcionamento. ;)

O intuito √© deixar os delegates para as situa√ß√µes mais especificas que n√£o podem ser resolvidas utilizando action, func e predicate.

Espero que tenha ficado claro, sei que de cara n√£o parece muito simples, mas recomendo fazer alguns testes com eles que garanto que ir√£o facilitar muito sua vida. =)

At√© a pr√≥xima.


    
    
    Please enable JavaScript to view the comments powered by Disqus.


        </description>
        <pubDate>Sun, 02 May 2021 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2021-05-02-func-action-predicate/</link>
        <guid isPermaLink="true">http://localhost:4000/2021-05-02-func-action-predicate/</guid>
      </item>
    
      <item>
        <title>Usando Extension Methods em c#</title>
        <description>
          
          

M√©todos de extens√£o s√£o um recurso muito interessante para estendermos alguma classe j√° existente, independente dela ter sido criada por n√≥s mesmo, uma biblioteca de terceiros ou at√© mesmo da pr√≥pria microsoft.

Imagino que a maioria dos devs j√° passou pela situa√ß√£o de utilizar alguma biblioteca e pensar ‚Äúnossa bem que podia ter uma fun√ß√£o X aqui!‚Äù.

Mas porque n√£o voce mesmo extender essa biblioteca para atender todas as suas necessidades hem?

Vamos direto ao exemplo!

void Main()
{
  var teste = &quot;Rafael&quot;.GerarTag();
  Console.WriteLine(teste); //&amp;lt;Rafael /&amp;gt;

  var teste2 = &quot;Rafael&quot;.GerarTag(&quot;Orion&quot;); //&amp;lt;Rafael&amp;gt;Orion&amp;lt;/Rafael&amp;gt;
  Console.WriteLine (teste2);
}


public static class HtmlExtension
{
  public static string GerarTag (this string value)
  {
    return &quot;&amp;lt;&quot; + value + &quot; /&amp;gt;&quot;;
  }

  public static string GerarTag (this string value, string value2)
  {
    return &quot;&amp;lt;&quot; + value + &quot;&amp;gt;&quot; + value2 + &quot;&amp;lt;/&quot; + value + &quot;&amp;gt;&quot; ;
  }
}



No exemplo acima criamos 2 m√©todos que estendem a classe string transformando um texto em uma tag html.

Desde que a HtmlExtension esteja na mesma namespace ou a referencia ao namespace esteja adicionada, qualquer strings ter√° esses 2 novo m√©todos dispon√≠veis, parece at√© magica. ;)

Para criar uma classe de extens√£o  precisamos seguir algumas regrinhas simples, primeiramente a classe e os m√©todos devem ser do tipo static.

Mas oq transforma efetivamente o m√©todo est√°tico em uma extens√£o √© o uso do this localizado no primeiro par√¢metro da fun√ß√£o.

public static string GerarTag (this string value)


No exemplo acima, como o this est√° antes do par√¢metro do tipo string, isso indica que ele ser√° uma extens√£o da classe string, nesse caso como s√≥ temos um √∫nico par√¢metro que faz a referencia para a base da nossa extension, na hora do uso n√£o ser√° necess√°rio passar nenhum par√¢metro, pois o this indica que o valor da pr√≥pria vari√°vel ser√° utilizado para popular esse par√¢metro automaticamente.

public static string GerarTag (this string value, string value2)


Nesse caso, al√©m da referencia para a nossa extension temos mais um par√¢metro, somente o segundo par√¢metro ser√° necess√°rio durante o uso conforme os exemplos anteriores.

Bem simples n√£o? a mesma l√≥gica vale para qualquer tipo de classe at√© mesmo as suas pr√≥prias classes.

At√© a pr√≥xima.

Refer√™ncias:

  Como implementar e chamar um m√©todo de extens√£o personalizado



    
    
    Please enable JavaScript to view the comments powered by Disqus.


        </description>
        <pubDate>Fri, 23 Apr 2021 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2021-04-23-extension-methods/</link>
        <guid isPermaLink="true">http://localhost:4000/2021-04-23-extension-methods/</guid>
      </item>
    
      <item>
        <title>Anonymous type, Dynamic e Object</title>
        <description>
          
          

Anonymous Type

Os Tipos an√¥nimos s√£o utilizados para encapsular propriedades em um objeto somente leitura.

Introduzidos no c# 3.0 junto com o var, com ele podemos criar um objeto definindo diretamente no construtor as propriedades que queremos, sem precisar usar uma classe j√° existente.

Para instanciar um objeto do tipo anonimo o processo √© similar a de uma classe comum, porem omitimos o tipo do objeto como no exemplo a seguir:

var produto = new { Nome= &quot;Teclado&quot;, Descricao=&quot;Keychron K8&quot;, Preco = (decimal)69.00 };

Console.WriteLine(&quot;Produto &quot; + produto.Nome + &quot; &quot; + produto.Descricao);


Bem simples n√£o √© verdade?

Note que n√£o temos nenhuma classe com as defini√ß√µes do nosso produto, todos os campos foram definidos e os valores atribu√≠dos diretamente no momento da inst√¢ncia.

Como os tipos anonimos s√£o readonly nao podemos alterar o valor de nenhuma das propriedade, isso resultaria em um erro de compila√ß√£o.

Object x Dynamic x var x Anonymous Type

Uma confus√£o bem comum √© com rela√ß√£o aos tipos anonimos, dynamic e object, para quem ainda n√£o tem esses conceitos bem definidos pode parecer que √© tudo igual, ent√£o vamos tentar esclarecer um pouco.

Object
Introduzido no c# 1.0, o tipo object pode receber qualquer tipo de valor, j√° que todas as classes em .Net herdam do tipo object.

Por se tratar de um tipo, pode ser declarado sem receber nenhum valor inicial, porem mesmo aceitando qualquer tipo de valor, quando utilizado precisamos fazer cast para o tipo desejado.

uma vari√°vel do tipo object alem de poder receber qualquer valor, tamb√©m pode alterar entre valores de diferentes tipos a qualquer momento.

exemplo:
object obj = &quot;Rafael Orion&quot;; //Declarando e iniciando uma vari√°vel object recebendo uma string
obj = 35; //sobrescrevendo o valor inicial com um valor do tipo inteiro

int number1 = obj; // compile error
int number2 = (int)obj; // correct


Note que apesar da nossa vari√°vel est√°r com um valor inteiro, n√£o √© poss√≠vel utilizar ele como inteiro sem efetuar a convers√£o antes, isso ir√° gerar um erro de compila√ß√£o.

Var
Introduzido no c# 3.0, o var nada mais √© do que uma forma de declarar alguma vari√°vel sem informar diretamente o seu tipo, o tipo ser√° deduzido baseado no valor recebido, por conta disso o valor da vari√°vel sempre deve ser informado no momento da declara√ß√£o.

Diferente do object, dynamic e anonymous type, o var n√£o √© um tipo de valor, e sim somente uma forma de declarar os objetos, apesar de n√£o obter nenhum ganho de performance na sua utiliza√ß√£o ele √© considerado por muitos uma boa pratica por deixar o c√≥digo um pouco mais limpo e menos redundante.
Exemplo:
Usuario usuario1 = new Usuario();
var usuario2 = new Usuario();


Note que em ambos os casos estamos instanciando um objeto do tipo ‚ÄúUsuario‚Äù, porem utilizamos o var n√£o temos a redund√¢ncia de informar o nome da classe duas vezes.

Justamente por n√£o ser um tipo, e sim somente um atalho para definir o tipo por Infer√™ncia, quando utilizado o var a vari√°vel receber√° o tipo do valor que est√° recebendo, e por conta disso n√£o pode ser alterado posteriormente.

exemplo:
var obj = &quot;Rafael&quot;;
obj = &quot;Rafael Orion&quot;;
obj = 35; // compile error

No exemplo acima nossa vari√°vel obj ser√° do tipo string por conta do valor que est√° sendo atribu√≠do, se tentarmos atribuir um valor de um tipo diferente do inicial teremos um erro de compila√ß√£o.

Anonymous Type
Introduzido no c# 3.0, como explicado anteriormente, podemos criar um objeto dinamicamente sem a necessidade de uma classe pr√©via que contenha a estrutura desejada.

Para declarar um anonymous type precisamos utilizar o var, j√° que n√£o temos uma palavra reservada especificamente para esse tipo.

Dynamic
Introduzido no c# 4.0, e similar ao tipo object, com o dynamic podemos receber qualquer valor de forma bem flex√≠vel com a vantagem do cast ser feito automaticamente.

dynamic obj = &quot;Rafael Orion&quot;;
obj = 35;
int number1 = obj; // correct
int number2 = (int)obj; // correct


Isso s√≥ √© poss√≠vel pois diferente do tipo object, dynamic n√£o possui todas as informa√ß√µes sobre o valor recebido, algumas s√≥ ser√£o resolvidas em runtime.

O fato de n√£o ser fortemente tipado pode deixar o seu uso mais pr√°tico, porem pode ocultar alguns problemas que s√≥ iram explodir em runtime. como dizia o tio Ben, ‚ÄúCom grandes poderes v√™m grandes responsabilidades‚Äù .

Exemplos:
var usuario = new { Id= 1, Nome = &quot;Rafael&quot;, Profissao= &quot;Programador&quot;}; //Anonymous Type 
usuario.Nome = &quot;Orion&quot;;  // compile error

//Verificando o tipo da nossa vari√°vel
Console.WriteLine(usuario.GetType().Name); //&amp;lt;&amp;gt;f__AnonymousType0`3

Console.WriteLine (&quot;dynamic:&quot;);
dynamic obj1 = 1;
dynamic obj2 = &quot;Orion&quot;;
dynamic obj3 = usuario;

Console.WriteLine(obj1.GetType().Name); //Int32
Console.WriteLine(obj2.GetType().Name); //String
Console.WriteLine(obj3.GetType().Name); //&amp;lt;&amp;gt;f__AnonymousType0`3

object obj4 = 1;
object obj5 = &quot;Orion&quot;;
object obj6 = usuario;

Console.WriteLine(&quot;objects:&quot;);
Console.WriteLine (obj4.GetType().Name); //Int32
Console.WriteLine (obj5.GetType().Name); //String
Console.WriteLine (obj6.GetType().Name); //&amp;lt;&amp;gt;f__AnonymousType0`3

var obj7 = 1;
var obj8 = &quot;Orion&quot;;
var obj9 = usuario;

Console.WriteLine (&quot;var:&quot;);
Console.WriteLine (obj7.GetType().Name); //Int32
Console.WriteLine (obj8.GetType().Name); //String
Console.WriteLine (obj9.GetType().Name); //&amp;lt;&amp;gt;f__AnonymousType0`3
		


Como passar um tipo anonimo via par√¢metro?

Se quisermos passar um tipo an√¥nimo como par√¢metro em alguma fun√ß√£o precisamos utilizar o tipo dynamic, apesar do tipo object tamb√©m suportar um tipo anonimo n√£o teremos acesso as propriedades diretamente sem efetuar um cast para dynamic ou utilizando reflection, por conta disso o dynamic se encaixa melhor na situa√ß√£o.

exemplo:
void Main()
{
  var usuario = new { Id= 1, Nome = &quot;Rafael&quot;, Profissao= &quot;Programador&quot;};
  Teste(usuario);
}
public void Teste(dynamic usuario)
{
  Console.WriteLine(usuario.Nome);
}


Como podemos ver a uni√£o do var com Anonymous Type e dynamic podem formar uma combina√ß√£o muito poderosa e flex√≠vel. =)

At√© a pr√≥xima.

Refer√™ncias:

  Tipos an√¥nimos (Guia de Programa√ß√£o em C#)



    
    
    Please enable JavaScript to view the comments powered by Disqus.


        </description>
        <pubDate>Wed, 21 Apr 2021 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2021-04-21-anonymous-type-dynamic-object/</link>
        <guid isPermaLink="true">http://localhost:4000/2021-04-21-anonymous-type-dynamic-object/</guid>
      </item>
    
      <item>
        <title>Generics em C#</title>
        <description>
          
          

Conforme vamos avan√ßando no entendimento de uma linguagem come√ßamos a ter contato com alguns conceitos que no primeiro momento podem parecer complicados, mas s√£o a chave para resolver diversos problemas.

Introduzido no .net Framework 2.0, o generics apresenta o conceito de par√¢metros de tipo, onde em vez de usar um tipo fixo, podemos receber o tipo via par√¢metro, deixando assim o nosso c√≥digo mais flex√≠vel.

Pode parecer complexo mas at√© mesmo quem n√£o est√° familiarizado com o termo generics j√° deve ter esbarrado com ele em algum momento, nem que seja na hora de declarar uma bela lista de string usando:
var lista = new List&amp;lt;string&amp;gt;;


Representado geralmente (mas n√£o obrigatoriamente) pelo car√°cter T, o Generics pode ser usado tanto diretamente no m√©todo como na classe para um escopo mais abrangente.

Temos a possibilidade de criar classes e m√©todos que adiam a especifica√ß√£o de um ou mais tipos at√© que a classe seja instanciada ou o m√©todo utilizada, uma das caracter√≠sticas do Generics √© a tipagem segura, al√©m de voc√™ pode usar sem custo ou risco de convers√µes de tempo de execu√ß√£o ou opera√ß√µes boxing, como ocorre com o tipo object.

Usando classes gen√©ricas

Calma, j√° disse que n√£o √© t√£o complicado quanto parece, simplificando, assim como nosso m√©todo pode receber o valor de uma vari√°vel por par√¢metro, o tipo dessa vari√°vel tamb√©m pode vir via par√¢metro. ;)

Ex:

public void ShowMessage&amp;lt;T&amp;gt;(T obj) {
  Console.WriteLine (obj.ToString());
}

void Main() {
  ShowMessage&amp;lt;int&amp;gt;(3);
  ShowMessage&amp;lt;DateTime&amp;gt;(DateTime.Now);
  ShowMessage&amp;lt;string&amp;gt;(&quot;Rafael&quot;);
}


No exemplo temos um m√©todo chamado ShowMessage, que ira receber um par√¢metro chamado obj, e o tipo desse par√¢metro tamb√©m ira ser informado por meio do T.

quando passamos o ,  ou  apos o nome do m√©todo, estamos informando qual vai ser o valor do par√¢metro.

A declara√ß√£o tamb√©m pode ser feita diretamente com a classe:
class Wallet&amp;lt;T&amp;gt;
{
  private List&amp;lt;T&amp;gt; MyItems;
  public DateTime Created { get; private set; }
  public DateTime LastUpdate { get; private set; }
  public T LastItem { get; private set; }

  public Wallet()
  {
    MyItems =  new List&amp;lt;T&amp;gt;();
    Created = DateTime.Now;
  }

  public void Add(T data)
  {
    MyItems.Add (data);	
    LastUpdate = DateTime.Now;
    LastItem = data;
  }
}

void Main()
{
  var stringWallet = new Wallet&amp;lt;string&amp;gt;();
  stringWallet.Add(&quot;teste 1&quot;);
  stringWallet.Add(&quot;teste 2&quot;);
  stringWallet.Add(&quot;teste 3&quot;);
	
  var intWallet = new Wallet&amp;lt;int&amp;gt;();
  intWallet.Add(1);
  intWallet.Add(2);
  intWallet.Add(3);	
}


No exemplo acima criamos uma classe chamada Wallet que ira armazenar uma lista de itens de qualquer tipo, como as opera√ß√µes executadas por ela s√£o gen√©ricas isso torna nossa vida muito mais f√°cil, em vez de criar uma wallet especifica para cada tipo que queremos armazenar podemos fazer isso uma √∫nica vez usando Generics.

Como podem ver o tipo T que informamos no momento que instanci√°mos a classe √© utilizado de diversas maneiras, tanto para declarar o tipo de alguma vari√°vel, como tipo em par√¢metros dos m√©todos e at√© mesmo como retorno da nossa fun√ß√£o.

Por convers√£o costumamos usar a letra T como a vari√°vel que ir√° receber o tipo, mas podemos usar qualquer outro nome ou at√© mesmo receber mais de um tipo, como por exemplo:

public void ShowMessage&amp;lt;T1, T2&amp;gt;(T1 obj, T2 obj2) {
  Console.WriteLine (obj.ToString() + &quot; &quot; +  obj2.ToString());
}

void Main() {
  ShowMessage&amp;lt;string, int&amp;gt;(&quot;Rafael&quot;, 99);
}


Apesar de ‚Äúgen√©rico‚Äù o  Generics pode seguir algumas regras para ajudar na codifica√ß√£o.
Por exemplo podemos querer qualquer vari√°vel que implemente a interface IList somente;

public T Clear&amp;lt;T&amp;gt;(T obj) where T: IList {
  obj.Clear();
  return obj;	
}


Nesse caso o m√©todo s√≥ poder√° receber como par√¢metro alguma classe que implemente a interface IList, essa regra √© feita utilizando o ‚Äúwhere T: IList‚Äù.

At√© a pr√≥xima.

Refer√™ncias:

  Generics



    
    
    Please enable JavaScript to view the comments powered by Disqus.


        </description>
        <pubDate>Fri, 16 Apr 2021 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2021-04-16-generics/</link>
        <guid isPermaLink="true">http://localhost:4000/2021-04-16-generics/</guid>
      </item>
    
      <item>
        <title>Delegates em C#</title>
        <description>
          
          

Hoje vamos falar um pouco sobre Delegates, o pr√≥prio nome j√° passa uma ideia do seu prop√≥sito.

Delegates s√£o formas de delegar fun√ß√µes para outros m√©todos, um delegate representa uma referencia para um m√©todo que pode ser passado via par√¢metro.

Com isso abrimos um leque de possibilidades, como escolher o comportamento de uma funcionalidade em runtime, definir o callback para uma fun√ß√£o e at√© mesmo extender o comportamento de alguma classe externa sem a necessidade de mudan√ßa direta no c√≥digo original.

Delegates s√£o semelhantes a ponteiros de fun√ß√£o do C++, a refer√™ncia da chamada de um m√©todo √© enviada ou atribu√≠da a um delegate em vez da fun√ß√£o concreta, tornando assim os delegates ferramentas t√£o flex√≠veis no desenvolvimento de uma aplica√ß√£o.

Um delegate √© declarado utilizando a palavra reservada delegate como no exemplo a seguir:
public delegate string MeuDelegate(string nome);


Um delegate pode ser atribu√≠do de diversas formas, utilizando um m√©todo nomeado, anonymous function ou at√© mesmo uma Lambda expression.

//Inicializando com um m√©todo j√° existente
MeuDelegate meuDelegate = FuncaoTeste; 

//Inicializando com uma anonymous function
MeuDelegate meuDelegate2 = delegate(string nome) { return $&quot;Bem vindo {nome}!&quot;; };

//Inicializando com uma Lambda expression
MeuDelegate meuDelegate3 = (nome) =&amp;gt; ($&quot;Bem vindo {nome}!&quot;);


Delegate ou MulticastDelegate?

Um delegate pode possuir retorno ou ser void, se um delegate n√£o tiver nenhum retorno (void) ele automaticamente ser√° do tipo System.MulticastDelegate, por conta disso, suportando o agrupamento com outras fun√ß√µes usando o operador ‚Äú+=‚Äù

public delegate void Del(string message);

public static void DelegateMethod1(string message) =&amp;gt; Console.WriteLine(&quot;DelegateMethod1 &quot; + message);
public static void DelegateMethod2(string message) =&amp;gt; Console.WriteLine(&quot;DelegateMethod2 &quot; + message);
public static void DelegateMethod3(string message) =&amp;gt; Console.WriteLine(&quot;DelegateMethod3 &quot; + message);

void Main()
{
  Del d1 = DelegateMethod1;
  Del d2 = DelegateMethod2;
  Del d3 = DelegateMethod3;

  Del allMethodsDelegate = d1 + d2;
  allMethodsDelegate += d3;

  allMethodsDelegate(&quot;Rafael Orion&quot;); //Os 3 m√©todos ser√£o executados
}


Se o delegate tiver algum retorno, nesse caso ele ser√° do tipo System.Delegate e n√£o suporta agrupamento de  m√©todos como o caso anterior.

Colocando a m√£o na massa!

Vamos montar um exemplo um pouco mais pr√°tico, imagine que temos uma fun√ß√£o externa para fazer um processamento dos dados de uma lista, mas queremos a possibilidade de injetar alguns filtros quando necess√°rio.

Aqui temos nossa classe do tipo Usuario:
public enum Sexo { Masculino, Feminino }

public class Usuario
{
  public int Id { get; set; }
  public string Nome { get; set; }
  public int Idade { get; set; }
  public Sexo Sexo { get; set; }
  public string Estado { get; set; }

  public Usuario(int id, string nome, int idade, Sexo sexo, string estado)
  {
    Id = id;
    Nome = nome;
    Idade = idade;
    Sexo = sexo;
    Estado = estado;
  }
  public override string ToString() =&amp;gt; return $&quot;Id:{Id} - {Nome}, {Sexo} ,{Idade} anos de {Estado}&quot;;
}


Aqui nosso delegate chamado ‚ÄúFiltro‚Äù que pode receber qualquer m√©todo com mesmos par√¢metros e retorno:
public delegate List&amp;lt;Usuario&amp;gt; Filtro(List&amp;lt;Usuario&amp;gt; usuarios);


Aqui temos uma fun√ß√£o que ir√° receber uma lista de Usu√°rios, ordenar e exibir:
public void ExibirUsuariosOrdenados(List&amp;lt;Usuario&amp;gt; usuarios, Filtro filtros = null)
{
  //Efetua a ordena√ß√£o
  var usuariosOrdenados = usuarios.OrderBy(_ =&amp;gt; _.Nome).ToList();

  //Verifica se o delegate foi atribu√≠do ou n√£o
  if(filtros != null)
  {
    usuariosOrdenados = filtros(usuariosOrdenados); //Executa o delegate enviado
  }

  //Exibe o resultado no console da aplica√ß√£o
  foreach(var usuario in usuariosOrdenados)
  {
    Console.WriteLine(usuario.ToString());
  }
}


Se chamarmos a nossa fun√ß√£o ExibirUsuariosOrdenados sem passar nenhum delegate de filtro o resultado ser√° somente nossa lista de nomes ordenada.

void Main()
{
  var usuarios = new List&amp;lt;Usuario&amp;gt;()
  {
    new Usuario(6,&quot;Usuario 6&quot;, 18, Sexo.Feminino, &quot;rio de janeiro&quot;),
    new Usuario(4,&quot;Usuario 4&quot;, 41, Sexo.Masculino, &quot;minas gerais&quot;),
    new Usuario(3,&quot;Usuario 3&quot;, 12, Sexo.Masculino, &quot;rio de janeiro&quot;),
    new Usuario(8,&quot;Usuario 8&quot;, 12, Sexo.Masculino, &quot;sao paulo&quot;),
    new Usuario(5,&quot;Usuario 5&quot;, 34, Sexo.Feminino, &quot;sao paulo&quot;),
    new Usuario(7,&quot;Usuario 7&quot;, 19, Sexo.Feminino, &quot;sao paulo&quot;),
    new Usuario(1,&quot;Usuario 1&quot;, 15, Sexo.Masculino, &quot;sao paulo&quot;),
    new Usuario(9,&quot;Usuario 9&quot;, 23, Sexo.Masculino, &quot;rio de janeiro&quot;),
    new Usuario(2,&quot;Usuario 2&quot;, 29, Sexo.Feminino, &quot;sao paulo&quot;),
  };

  Console.WriteLine(&quot;Exibindo todos sem filtro&quot;);
  ExibirUsuariosOrdenados(usuarios);
}


nesse caso o resultado seria:
Exibindo todos sem filtro
Id:1 - Usuario 1, Masculino ,15 anos de sao paulo
Id:2 - Usuario 2, Feminino ,29 anos de sao paulo
Id:3 - Usuario 3, Masculino ,12 anos de rio de janeiro
Id:4 - Usuario 4, Masculino ,41 anos de minas gerais
Id:5 - Usuario 5, Feminino ,34 anos de sao paulo
Id:6 - Usuario 6, Feminino ,18 anos de rio de janeiro
Id:7 - Usuario 7, Feminino ,19 anos de sao paulo
Id:8 - Usuario 8, Masculino ,12 anos de sao paulo
Id:9 - Usuario 9, Masculino ,23 anos de rio de janeiro


Criando um m√©todo para usar no delegate
public List&amp;lt;Usuario&amp;gt; FiltroMaioresDeIdade(List&amp;lt;Usuario&amp;gt; usuarios)
{
  return usuarios.Where(_ =&amp;gt; _.Idade &amp;gt; 18).ToList();
}


Se passarmos o nosso m√©todo FiltroMaioresDeIdade para o delegate o resultado ser√°:
Console.WriteLine(&quot;Exibindo com filtro de idade&quot;);
ExibirUsuariosOrdenados(usuarios, FiltroMaioresDeIdade);


Resultado:
Exibindo com filtro de idade
Id:2 - Usuario 2, Feminino ,29 anos de sao paulo
Id:4 - Usuario 4, Masculino ,41 anos de minas gerais
Id:5 - Usuario 5, Feminino ,34 anos de sao paulo
Id:7 - Usuario 7, Feminino ,19 anos de sao paulo
Id:9 - Usuario 9, Masculino ,23 anos de rio de janeiro


Tamb√©m podemos definir atribuir um delegate usando lambda:
Console.WriteLine(&quot;Exibindo com filtro de cidade usando Lambda&quot;);
Filtro filtroPaulistas = (lista) =&amp;gt; (lista.Where(_ =&amp;gt; _.Estado.Equals(&quot;sao paulo&quot;)).ToList());
ExibirUsuariosOrdenados(usuarios, filtroPaulistas);


Resultado:
Exibindo com filtro de cidade usando Lambda
Id:1 - Usuario 1, Masculino ,15 anos de sao paulo
Id:2 - Usuario 2, Feminino ,29 anos de sao paulo
Id:5 - Usuario 5, Feminino ,34 anos de sao paulo
Id:7 - Usuario 7, Feminino ,19 anos de sao paulo
Id:8 - Usuario 8, Masculino ,12 anos de sao paulo


Ok, mas posso executar mais de uma fun√ß√£o ao mesmo tempo usando o mesmo delegate?

A resposta para essa pergunta √© depende.
Se o seu delegate tiver um retorno assim como no exemplo anterior n√£o ser√° poss√≠vel encadear mais de uma fun√ß√£o, isso s√≥ √© poss√≠vel para m√©todos void.

Ent√£o seguindo a l√≥gica do nosso exemplo, se quisermos enviar mais de um filtro ao mesmo tempo temos que fazer algumas altera√ß√µes:

Primeiramente nosso delegate n√£o pode mais ter um retorno, para continuar alterando nossa lista sem um retorno vamos apelar para a m√°gica da passagem de par√¢metro por refer√™ncia, possibilitando que nosso m√©todo altere a lista original
public delegate void Filtro(ref List&amp;lt;Usuario&amp;gt; usuarios);


Os m√©todos dos filtros tamb√©m precisam ser alterados:
public void FiltroMaioresDeIdade(ref List&amp;lt;Usuario&amp;gt; usuarios)
{
  usuarios = usuarios.Where(_ =&amp;gt; _.Idade &amp;gt; 18).ToList();
}

public void FiltroPaulistas(ref List&amp;lt;Usuario&amp;gt; usuarios)
{
  usuarios = usuarios.Where(_ =&amp;gt; _.Estado.Equals(&quot;sao paulo&quot;)).ToList();
}


Agora j√° podemos trabalhar com um ou mais filtros
  Console.WriteLine(&quot;Exibindo com filtro de idade&quot;);
  ExibirUsuariosOrdenados(usuarios, FiltroMaioresDeIdade);
  Console.WriteLine(&quot;\n&quot;);

  Console.WriteLine(&quot;Exibindo com filtro de cidade&quot;);
  ExibirUsuariosOrdenados(usuarios, FiltroPaulistas);
  Console.WriteLine(&quot;\n&quot;);

  Console.WriteLine(&quot;Exibindo com filtro de idade e cidade&quot;);
  Filtro multiplosFiltros = FiltroMaioresDeIdade;
  multiplosFiltros+= FiltroPaulistas; //Atribuindo um segundo m√©todo por meio do operador +
  ExibirUsuariosOrdenados(usuarios, multiplosFiltros);
  Console.WriteLine(&quot;\n&quot;);


Resultado:
Exibindo com filtro de idade
Id:2 - Usuario 2, Feminino ,29 anos de sao paulo
Id:4 - Usuario 4, Masculino ,41 anos de minas gerais
Id:5 - Usuario 5, Feminino ,34 anos de sao paulo
Id:7 - Usuario 7, Feminino ,19 anos de sao paulo
Id:9 - Usuario 9, Masculino ,23 anos de rio de janeiro

Exibindo com filtro de cidade
Id:1 - Usuario 1, Masculino ,15 anos de sao paulo
Id:2 - Usuario 2, Feminino ,29 anos de sao paulo
Id:5 - Usuario 5, Feminino ,34 anos de sao paulo
Id:7 - Usuario 7, Feminino ,19 anos de sao paulo
Id:8 - Usuario 8, Masculino ,12 anos de sao paulo

Exibindo com filtro de idade e cidade
Id:2 - Usuario 2, Feminino ,29 anos de sao paulo
Id:5 - Usuario 5, Feminino ,34 anos de sao paulo
Id:7 - Usuario 7, Feminino ,19 anos de sao paulo


Como podem ver no exemplo √© poss√≠vel passar diversos m√©todos para o mesmo delegate, todos ser√£o executados quando o delegate for executado.

Lembrando que esse problema apresentado poderia ser feito de diversas outras formas muito melhores, a ideia aqui √© somente exemplificar o uso de um delegate de uma maneira simples, garanto que ir√° se deparar com diversas possibilidade no seu dia a dia. ;)

Refer√™ncias:

  Delegados (Guia de Programa√ß√£o em C#)
  Delegates and Events


At√© a pr√≥xima.


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Mon, 12 Apr 2021 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2021-04-12-delegates/</link>
        <guid isPermaLink="true">http://localhost:4000/2021-04-12-delegates/</guid>
      </item>
    
      <item>
        <title>.Net CLI</title>
        <description>
          
          

Depois dessa pequena pausa, que tal voltar falando um pouco sobre o CLI do .NET

Junto com a vinda do .NET Core ganhamos de brinde o CLI (Command Line Interface), a nova ferramenta cross-platform que nos permite criar, compilar, publicar e manipular packages das nossas aplica√ß√µes feitas com .net core.

Com o CLI fica mais f√°cil automatizar algumas tarefas de devops, desenvolver utilizando outros sistemas operacionais como Mac/Linux ou at√© mesmo migrar do VisualStudio para o VsCode ;)

Para utilizar os comandos do CLI basta ter o .Net Core instalado e usar o terminal de sua prefer√™ncia.

A estrutura dos comandos segue o seguinte padr√£o:
 dotnet &amp;lt;command&amp;gt; &amp;lt;argument&amp;gt; &amp;lt;option&amp;gt;


Alguns exemplos:

  Para criar uma nova aplica√ß√£o Console chamada ‚ÄúNewConsole‚Äù
    dotnet new console -n NewConsole
    
  
  para criar uma nova aplica√ß√£o web mvc
    dotnet new mvc
    
  
  Adiciona refer√™ncia do Newtonsoft.json no projeto
    dotnet add package Newtonsoft.json
    
  


Alguns comandos b√°sicos s√£o:


  dotnet new = Cria um novo projeto ou solution baseado em algum template espec√≠fico
  dotnet restore = Restaura as depend√™ncias do projeto
  dotnet build = Compila a aplica√ß√£o
  dotnet Run = Executa a aplica√ß√£o
  dotnet publish = Efetuar o deploy da aplica√ß√£o
  dotnet test = Executa os testes unit√°rios
  dotnet vtest = Executa os testes unit√°rios de um arquivo espec√≠fico
  dotnet pack = Gera um pacote do nuget com o c√≥digo
  dotnet clean = Limpa o output do projeto
  dotnet sln = Modifica o .NET Core solution file.
  dotnet add package = Adiciona a refer√™ncia de um pacote do nuget no projeto
  dotnet add reference = Adiciona refer√™ncia de um outro projeto
  dotnet remove package = Remove a refer√™ncia de um pacote do nuget
  dotnet remove reference =	Remove a refer√™ncia de um projeto
  dotnet list reference = Lista todas as refer√™ncias


Refer√™ncias:

  docs.microsoft.com/pt-br/dotnet/core/tools
  docs.microsoft.com/pt-br/dotnet/core/tools/dotnet


At√© a pr√≥xima.


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Tue, 30 Mar 2021 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2021-03-30-dot-net-cli/</link>
        <guid isPermaLink="true">http://localhost:4000/2021-03-30-dot-net-cli/</guid>
      </item>
    
      <item>
        <title>Domain Driven Design (DDD)</title>
        <description>
          
          

Comecei a ouvir falar de Domain Driven Design (ou DDD para os √≠ntimos) na  √©poca em que entrei no grupo de discu√ß√µes do DotNet Architects, percebi que tinha muita gente da comunidade falando a respeito e resolvi entender um pouco mais sobre esse tipo de arquitetura.

O DDD  √© um modelo de arquitetura proposto pelo Eric Evans apoiado por grandes gurus da inform√°tica, re√∫ne muitos aspectos j√° existentes formando um padr√£o que √© considerado por muitos como ‚Äúo retorno da orienta√ß√£o a objeto‚Äù.

O foco do DDD √© no Dom√≠nio (dom√≠nio √© todo o universo que envolve o seu problema), atrav√©s da utiliza√ß√£o de uma Linguagem Ubliqua e um Modelo Rico, ele tenta prover uma arquitetura clara que revele com facilidade as caracter√≠sticas e fun√ß√µes de cada elemento do seu sistema assim como a intera√ß√£o entre eles.

Linguagem Ubliqua (ou linguagem onipresente) trata-se da padroniza√ß√£o os termos usados na an√°lise e no desenvolvimento, linguagem comum utilizando os mesmos termos do negocio no desenvolvimento evitando modifica√ß√£o dos mesmos ou abuso de termos t√©cnicos n√£o correspondentes ao negocio .

Modelo Rico basicamente seria o uso de objetos com propriedades e  m√©todos, diferente do modelo an√™mico onde os objetos possuem somente propriedades, e os m√©todos com a regra de negocio concentram-se em classes diferente.

Para criar um bom software voc√™ tem que conhecer bem o cen√°rio, refletir o mundo real em c√≥digo n√£o √© algo f√°cil, e a utiliza√ß√£o de uma linguagem Ubliqua  ajuda bastante na hora de construir essa ponte entre o mundo real e as classes. Todos os envolvidos devem estar falando a mesma l√≠ngua, nada de ‚Äútecn√™s‚Äù que n√£o fa√ßa parte do dom√≠nio.

DDD √© ideal principalmente para dom√≠nios com regras de neg√≥cio complexas pois esse foco em separa√ß√£o de papeis, coes√£o e simplicidade ajuda e muito na hora de entender cada ponto do sistema para desenvolver e dar manuten√ß√£o.

Este padr√£o arquitetural √© constitu√≠do por alguns elementos, n√£o √© necess√°rio utilizar todos, tudo depende do seu cen√°rio; Alguns de seus elementos s√£o: Servi√ßos, Reposit√≥rios, Entidades, Objetos de Valor, Agregados, Factories, Modelo Rico,‚Ä¶

Brevemente vou descrever mais detalhadamente cada um de seus elementos.

Por mais que eu goste de DDD e acredite que √© uma arquitetura muito poderosa n√£o podemos dizer que ela veio para substituir as outras,  um arquiteto de verdade deve saber observar o problema antes de tudo e decidir a melhor arquitetura que se encaixa ao cen√°rio.

Gosto de trabalhar voltado a DDD de uma forma mais evolutiva, sem me prender logo de cara a todas suas recomenda√ß√µes, vou aplicando cada elemento conforme vai surgindo a necessidade.

E para quem quer se aprofundar no assunto recomendo a leitura do livro do Evans, tamb√©m tem um e-book gratuito sobre o assunto no infoQ alem da palestra do Giovanni Bassi sobre DDD que d√° uma boa ideia geral sobre o assunto.

Estrutura do DDD:



At√© a pr√≥xima.


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Sun, 11 Mar 2012 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2012-03-11-domain-driven-design/</link>
        <guid isPermaLink="true">http://localhost:4000/2012-03-11-domain-driven-design/</guid>
      </item>
    
      <item>
        <title>Acessando propriedades de uma master page atrav√©s de uma content page</title>
        <description>
          Quick Tip - 
          

Agora vou dar uma dica bem simples de como acessar propriedades que est√£o em uma master page por uma de suas paginas filho.
Primeiramente vamos declarar uma propriedade publica na MasterPage:



Public String PropriedadePublica
{
       get { return (String)Session[&quot;PropriedadePublica&quot;]; }
       set { Session[&quot;PropriedadePublica&quot;] = value; }
}


Estou utilizando sessions para que os valores da propriedade n√£o sej√£o perdidos a cada postback.
J√° na pagina filha para que possamos enchergar a propriedade da masterPage √© preciso adicionar uma diretiva no aspx.

&amp;lt;% @MasterType VirtualPath=&quot;~/Site.master&quot; %&amp;gt;


Lembrando que o caminho informado deve ser o mesmo que na propriedade MasterPageFile.
Com isso j√° √© poss√≠vel acessar as propriedades de uma master page da seguinte forma:

lblTeste.Text = Master.PropriedadePublica;


Outra forma de acessar dados da Masterpage √© atav√©z de seus componentes;
Para isso basta usar o comando FindControl como no exemplo:

var teste = ((Label)Master.FindControl(&quot;lblTeste&quot;)).Text


At√© a pr√≥xima.

        </description>
        <pubDate>Tue, 28 Feb 2012 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2012-02-28-quicktip-acessando-propriedades-de-uma-master-page-atraves-de-uma-content-page/</link>
        <guid isPermaLink="true">http://localhost:4000/2012-02-28-quicktip-acessando-propriedades-de-uma-master-page-atraves-de-uma-content-page/</guid>
      </item>
    
      <item>
        <title>Utilizando MSMQ (Microsoft Message Queue) no C#</title>
        <description>
          
          

O MSMQ (Microsoft Message Queue) √© uma implementa√ßao da Microsoft presente desde o windows 95 para  o enfileiramento de Mensagens.

As filas trabalham com a politica  FIFO (First In First Out), ou seja, em uma fila podemos empilhar uma serie de mensagens, e sempre sera recuperado uma a uma come√ßando pela ultima que foi inserida.

O MSMQ trabalha de forma assincrona, possibilitando que diferentes aplica√ßoes comuniquem-se por meio de mensagens, o software envia as mensagens que ser√£o empilhadas em uma fila gerenciada pelo proprio windows at√© que o programa receptor va at√© la pegar as mensagens.

Tipos de Filas

No MSMQ podemos criar filas Publicas ou Privadas. As filas publicas podem ser acessadas apartir de qualquer computador que fa√ßa parte do mesmo Dominio atravez do Active Directory, j√° as filas privadas s√£o compartilhadas somente com os programas rodando na mesma maquina.

Transacional

Tambem podemos definir a fila como transacional ou n√£o, protegendo a inser√ßao e remo√ßao de mensagens em casos de erros.

Instalando o MSMQ

Para come√ßao a utilizar o MSMQ precisamos ir no ‚Äúpainel de controle‚Äù &amp;gt; ‚ÄúProgramas e Recursos‚Äù &amp;gt; ‚ÄúAtivar ou desativar recursos do Windows‚Äù e marcar o checkbox ‚ÄúServi√ßos do MSMQ (Microsoft Message Queue)‚Äù como na imagem abaixo.



M√£os a Obra

Primeiramente √© necess√°rio adicionar a referencia para o  ‚ÄúSystem.Messaging ‚Äù no projeto.

Como o MSMQ pode gerenciar varias filas quando formos criar/utilizar uma fila precisaremos dar um nome e caminho a ela.

Como no exemplo vou utilizar uma lista privada o caminho da lista deve ser ‚Äú.\Private$\‚Äù, caso estivese criando uma lista Publica o caminho seria o o nome do dominio da Rede. O caminho deve ser passado junto com o nome da nossa lista.

Criando/Abrindo uma lista

MessageQueue msg;
var qName = @&quot;.\Private$\teste_app&quot;;
if (MessageQueue.Exists(qName))
    msg = new MessageQueue(qName);
else
    msg = MessageQueue.Create(qName);


Essa lista pode receber qualquer tipo de objeto, porem devemos escolher entre 2 tipos de formato, pode ser uma classe serializada ou binario.
Lembrando que se optarmos pelo formato em binario tanto o programa que envia qnt o receptor deve fazer referencia para a mesma dll que contem o objeto.

No exemplo vou passar o seguinte objeto serializado.

[Serializable]
public class Job
{
    public int ID { get; set; }
    public String Nome { get; set; }
}


Vamos configurar o formato:

msg.Formatter = new XmlMessageFormatter(new Type[] { typeof(Job) });


Agora basta enviar o objeto para a fila

var obj = new CommomLib.Job(){ ID = 10 ,  Nome = &quot;Processo 1&quot; };
msg.Send(obj);


Para pegar um item da Lista a outra aplica√ßao devera primeiramente abrir a lista da mesma forma utilizada anteriormente, em seguida utilizar o seguinte c√≥digo:

var myMessage = msg.Receive();
Job myJob = (Job)myMessage.Body;


Pronto! simples, agora vamos parar de utilizar banco de dados para gerenciar filas ok üòâ

At√© a pr√≥xima. []s


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Thu, 02 Feb 2012 00:00:00 -0200</pubDate>
        <link>http://localhost:4000/2012-02-02-utilizando-msmq/</link>
        <guid isPermaLink="true">http://localhost:4000/2012-02-02-utilizando-msmq/</guid>
      </item>
    
      <item>
        <title>Como adicionar confirma√ß√£o de exclus√£o em um ActionLink</title>
        <description>
          Quick Tip - 
          

Para adicionar uma confirma√ß√£o de exclus√£o ou qualquer alerta em um ActionLink do asp.Net MVC √© muito simples.


Segue um exemplo abaixo:

@Html.ActionLink(‚ÄúExcluir‚Äù, ‚ÄúDelete‚Äù, new { id = item.Id }, new { @onClick =  ‚Äújavascript:return ‚Äù + ‚Äúconfirm(‚ÄòConfirma a exclus√£o?‚Äô)‚Äù})


Em algumas sobrecargas o ActionLink recebe um Object para htmlAttributes, e √© nele que colocamos o nosso javascript para o atributo onClick.

Lembrando que tamb√©m podemos setar qualquer atributo html para o ActionLink dessa mesma forma.

At√© a pr√≥xima.


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Wed, 28 Dec 2011 00:00:00 -0200</pubDate>
        <link>http://localhost:4000/2011-12-28-quicktip-como-adicionar-confirmacao-de-exclusao-em-um-actionlink/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-12-28-quicktip-como-adicionar-confirmacao-de-exclusao-em-um-actionlink/</guid>
      </item>
    
      <item>
        <title>Utilizando Tipos Nulos em c# (Nullable Types)</title>
        <description>
          
          

Em alguns casos precisamos trabalhar com tipos nulos, mas por padr√£o nem todos os tipos de vari√°veis aceitam, porem em c# √© muito simples criarmos vari√°veis que possam assumir valores nulos.

Nullable
Qualquer tipo pode passar a ser nullable , por exemplo uma vari√°vel do tipo int por padr√£o n√£o pode receber null, para resolver isso basta adicionar o operador ? logo depois do tipo desejado.
Declararmos da seguinte forma:

int? numero;
numero = null;

//ou

Nullable numero2;
numero2 = null;


Com isso criamos uma vari√°vel do tipo int nullable.

Utilizo bastante vari√°veis nullables  por exemplo quando quero passar um parametro bool? ativo em uma fun√ßao onde quando o valor  for True trarei todos os registros ativos, False todos os Inativos e Null para trazer todos os ativos e inativos.

Operador ??
O operador ?? apesar de pouco conhecido √© muito √∫til, com ele podemos verificar de forma r√°pida e elegante se uma vari√°vel possui valor nulo;

Exemplo:
int? numero = null;
int numero2 = numero??99;

string mensagem = null;
string mensagem2 = mensagem??&quot;Mensagem Nula&quot;;


Com isso caso o valor da vari√°vel que  antecede o operador ?? for nulo, ser√° atribuido o valor que est√° posterior ao operador ??, caso contrario ser√° atribuido o valor da vari√°vel em quest√£o.

Ele trabalha de forma bem parecida a um if tern√°rio:

int? numero = null;
int numero2 = numero == null ? 99 : numero;


Esse operador pode ser muito √∫til por exemplo em Getters para evitar retorno de um objeto n√£o instanciado:

private IList empresas;
public IList Empresas
{
    get { return empresas = empresas ?? new List(); }
    set { empresas = value; }
}


Ou quando precisamos reistanciar algum objeto caso esteja nulo.

repositorio = repositorio ?? new Repositorio();
//Somente ser√° reinstanciada caso sej√° nulo.


At√© a pr√≥xima.

[]s


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Mon, 28 Nov 2011 00:00:00 -0200</pubDate>
        <link>http://localhost:4000/2011-11-28-utilizando-tipos-nulos-em-c-nullable-types/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-11-28-utilizando-tipos-nulos-em-c-nullable-types/</guid>
      </item>
    
      <item>
        <title>Consultando desempenho da maquina com o PerformanceCounter</title>
        <description>
          
          

Com o PerformanceCounter podemos obter diversas informa√ß√µes sobre o desempenho atual da maquina, como por exemplo quantidade de mem√≥ria em uso, espa√ßo livre no HD, processamento, etc.

Quando precisamos rodar um processo muito pesado em um servidor  atrav√©s de um servi√ßo  peri√≥dico muitas vezes vale a pena conferir a situa√ß√£o da maquina antes de iniciar o processo para evitar travamento do sistema. Ou ate mesmo utilizar essas  informa√ß√µes para criar um monitorador dos recursos, vai da sua necessidade e criatividade.

Vamos para o que interessa.

Para pegar informa√ß√µes b√°sicas sobre o uso de mem√≥ria, hd e processador √© muito simples, basta utilizar os seguintes comandos:

var cpu = new System.Diagnostics.PerformanceCounter(&quot;Processor&quot;, &quot;% Processor Time&quot;, &quot;_Total&quot;);
var memory = new System.Diagnostics.PerformanceCounter(&quot;Memory&quot;, &quot;% Committed Bytes In Use&quot;);
var hd = new System.Diagnostics.PerformanceCounter(&quot;PhysicalDisk&quot;, &quot;% Disk Time&quot;, &quot;_Total&quot;);

Console.WriteLine(&quot; % Uso do Processador: {0}&quot;, cpu.NextValue());
Console.WriteLine(&quot; % Uso de Mem√≥ria: {0}&quot;, memory.NextValue());
Console.WriteLine(&quot; % Acesso ao HD: {0}&quot;, hd.NextValue());


Para mais informa√ß√µes clique aqui

At√© a pr√≥xima.
[]s


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Sun, 27 Nov 2011 00:00:00 -0200</pubDate>
        <link>http://localhost:4000/2011-11-27-consultando-desempenho-da-maquina-com-o-performancecounter/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-11-27-consultando-desempenho-da-maquina-com-o-performancecounter/</guid>
      </item>
    
      <item>
        <title>Debugando Windows Service</title>
        <description>
          
          

Hoje vou ensinar uma forma para debugar windows service.

Ao criarmos um projeto do tipo WindowsService n√£o conseguimos debugar normalmente como qualquer outro tipo de projeto, porem temos uma forma bem simples para contornar esse problema.

Primeiramente devemos criar uma condi√ß√£o na classe Program.cs para identificar se o nosso projeto foi executado em modo de Debug para redirecionarmos a chamada.

Program.cs

  static void Main()
  {

      if (System.Diagnostics.Debugger.IsAttached)
      {
          MeuServico service = new MeuServico();
          service.StartDebug(new string[2]);
          System.Threading.Thread.Sleep(System.Threading.Timeout.Infinite);

      }
      else
      {
          ServiceBase[] ServicesToRun;
          ServicesToRun = new ServiceBase[] { new MeuServico() };
          ServiceBase.Run(ServicesToRun);
      }
  }


Apos feito isso, basta editar a classe do nosso servi√ßo e adicionar um m√©todo StartDebug como no exemplo abaixo.

No service:

   public void StartDebug(string[] args)
   {
       OnStart(args);
   }


Como o M√©todo OnStarde √© do tipo protected criamos esse novo m√©todo publico para redirecionar a chamada.

Pronto! j√° podemos debugar nosso projeto normalmente sem nenhum problema.

[]s


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Fri, 25 Nov 2011 00:00:00 -0200</pubDate>
        <link>http://localhost:4000/2011-11-25-debugando-windows-service/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-11-25-debugando-windows-service/</guid>
      </item>
    
      <item>
        <title>Como criar um actionLink para outra Area no Asp.Net MVC3</title>
        <description>
          Quick Tip - 
          

Fala ae galera.

Quando comecei a trabalhar com √°reas no asp.net MVC3 me deparei com essa situa√ß√£o de criar um link que aponte para uma √°rea diferente.
Apesar de ser algo simples fica a dica.

&amp;lt;%= Html.ActionLink(‚ÄúDescri√ß√£o do Link‚Äù, ‚ÄúNomeDaPagina‚Äù, new { area=‚ÄùNomeDaArea‚Äù, controller=‚ÄùNomeDoController‚Äù } )%&amp;gt;

Ou na sintaxe do Razor:

@Html.ActionLink(‚ÄúDescri√ß√£o do Link‚Äù, ‚ÄúNomeDaPagina‚Äù, new { area=‚ÄùNomeDaArea‚Äù, controller=‚ÄùNomeDoController‚Äù } )

Abra√ßos,


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Thu, 24 Nov 2011 00:00:00 -0200</pubDate>
        <link>http://localhost:4000/2011-11-24-quicktip-como-criar-actionlink-para-areas-aspnetmvc/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-11-24-quicktip-como-criar-actionlink-para-areas-aspnetmvc/</guid>
      </item>
    
      <item>
        <title>Comandos do Nuget</title>
        <description>
          
          

No post anterior falei um pouco sobre o NuGet, agora vou listar alguns dos principais comandos para voc√™ utilizar no console do Visual Studio.

Para exibir o shell de comandos do NuGet, v√° no menu View/Other Windows/Package Manage Console.

A seguinte janela ir√° ficar  vis√≠vel:



No combo do lado esquerdo selecionamos qual ser√° nosso reposit√≥rio, por padr√£o ele busca da web mas podemos informar um reposit√≥rio privado.

No combo do lado direito selecionamos o projeto no qual as referencias ser√£o aplicadas.

Pesquisando um pacote pelo NuGet:

Para pesquisar um pacote, por exemplo o NHibernate basta digitar o seguinte comando:

PM&amp;gt; Get-Package nhibernate -remote

Esse comando trar√° todos os pacotes que possuem ‚ÄúNHibernate‚Äù no nome.

O parametro ‚Äú- remote‚Äù indica que o pacote ser√° pesquisado no reposit√≥rio selecionado em vez de buscar os pacotes instalados no projeto.

Adicionando refer√™ncia de um pacote ao Projeto:

Para adicionar a referencia de um pacote, por exemplo o FluentNhibernate:

PM&amp;gt; Install-Package fluentnhibernate

Esse comando instalar√° o fluent e todas suas  depend√™ncias, como por exemplo o NHibernate e Iesi.Collections, ele buscar√° sempre a vers√£o mais atual.

Para n√£o instalar as depend√™ncias basta adicionar o par√¢metro  ‚Äú-ignoreDependencies‚Äù

PM&amp;gt; Install-Package fluentnhibernate -IgnoreDependencies

Tamb√©m podemos informar qual vers√£o desejamos instalar com o par√¢metro  -Version

Removendo um pacote do Projeto:

Para remover uma referencia basta usar o comando:

PM&amp;gt; Uninstall-Package FluentNHibernate

Atualizando um pacote adicionado:

Para atualizar um pacote para a vers√£o mais recente:
PM&amp;gt; Update-Package FluentNHibernate

Para atualizar um pacote para uma vers√£o especifica:
PM&amp;gt; Update-Package FluentNHibernate -version 1.0.0

Listando os pacotes Instalados:

Para listar os pacotes instalados a l√≥gica √© a mesma de quando buscamos no reposit√≥rio, basta omitir o par√¢metro ‚Äú-remote‚Äù

Para listar todos instalados:
PM&amp;gt; Get-Package

Para buscar algum especifico:
PM&amp;gt; Get-Package nhibernate



A documenta√ß√£o completa em ingl√™s pode ser encontrada aqui.

Dica

O NuGet possui AutoComplete para auxiliar na digita√ß√£o dos comandos e nomes de pacotes, basta pressionar a tecla Tab depois de digitar o inicio do comando.


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Thu, 15 Sep 2011 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2011-09-15-commandos-nuget/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-09-15-commandos-nuget/</guid>
      </item>
    
      <item>
        <title>Como zerar o valor de um campo Identity</title>
        <description>
          Quick Tip - 
          

Fala ae Galera.

Vou postar uma dica simples mas √∫til. Ao Criarmos uma coluna identity no Sql Server, mesmo depois de apagar todos os dados da tabela, ao inserirmos um novo registro ele continuar√° incrementando o valor desse campo a partir do ultimo valor inserido. Para zerar esse contador basta executar o seguinte script:

DBCC CHECKIDENT( ‚Äò [NOME_DA_TABELA] ‚Äò , RESEED, 0)

ex:
DBCC CHECKIDENT(‚ÄòFuncionarios‚Äô, RESEED, 0)

Tamb√©m podemos modificar esse valor para que comece a partir de algum numero espec√≠fico.

Ex:
DBCC CHECKIDENT(‚ÄòFuncionarios‚Äô, RESEED, 50)

Nesse caso o Pr√≥ximo registro inserido na tabela Funcion√°rios assumira o valor 51.

Abra√ßos,

Rafael Orion


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Sun, 04 Sep 2011 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2011-09-04-quicktip-como-zerar-campo-identity-no-sql/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-09-04-quicktip-como-zerar-campo-identity-no-sql/</guid>
      </item>
    
      <item>
        <title>Nuget</title>
        <description>
          
          

NuGet √© um projeto open source para gerenciar pacotes na plataforma .NET.

Com o NuGet as tarefas de adicionar uma biblioteca,configurar e atualizar ficaram muito mais f√°ceis.  Basta buscar nele a biblioteca que deseja utilizar que far√° o trabalho de configurar seu ambiente e instalar todas as depend√™ncias necess√°rias deixando tudo bem organizado e centralizado.

Por padr√£o o NuGet buscar√° as refer√™ncias em um reposit√≥rio publico na internet, mas voc√™ tamb√©m pode montar um reposit√≥rio local na sua empresa para suas bibliotecas, e apontar o nuget para buscar a partir dela.

Por exemplo, para adicionar o FluentNhibernate em nosso projeto da forma convencional precisar√≠amos seguir os seguintes passos:


  Entrar no site do NHibernate e baixar a ultima vers√£o.
  Efetuar o download de todas as dlls dependentes, como por exemplo, o NHibernate.
  Descompactar e copiar a dll para o nosso projeto.
  Referenciar as dlls no projeto.
  Em alguns casos efetuar alguma configura√ß√£o no webconfig.
  E torcer para n√£o estar faltando nenhuma outra depend√™ncia.


Um pouco trabalhoso n√£o acham? Mas como far√≠amos isso utilizando o NuGet?

No visual studio (com o plug-in do NuGet instalado) basta abrir o Console do NuGet e digitar a seguinte linha de comando:

Install-Package FluentNHinernate

Pronto! J√° est√° funcionando!, Simples n√£o √© mesmo?

Ao executar esse comando, o NuGet vai at√© o seu reposit√≥rio publico na internet e busca a vers√£o mais recente do componente, todas suas depend√™ncias, efetua o download, joga em uma pasta chamada Packages dentro da sua solution e configura oque for necess√°rio.

Tamb√©m √© poss√≠vel especificar a vers√£o do componente que ser√° baixado, ignorar as depend√™ncias, remover pacotes, buscar por pacotes no reposit√≥rio, atualizar referencias do projeto para uma vers√£o mais recente, etc etc.

Para instalar o plug-in do NuGet, o projeto est√° hospedado no Github , l√° voc√™ vai encontrar o c√≥digo fonte, documenta√ß√£o, exemplos e o plug-in para o visual studio 2010.

A instala√ß√£o n√£o foge do padr√£o next, next , finish. E para visualizar o shell ap√≥s a instala√ß√£o v√° no menu do VisualStudio View/Other Windows/Package Manager Console.

Depois farei um novo post demonstrando os principais comandos.

Abra√ßos,
Rafael Orion


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Sun, 04 Sep 2011 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2011-09-04-nuget/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-09-04-nuget/</guid>
      </item>
    
      <item>
        <title>Hello world!</title>
        <description>
          
          

Finalmente, depois de algum tempo enrrolando, resolvi tomar vergonha na cara e criar um blog pr√≥prio (depois de algumas experiencias em um blog com o pessoal da faculdade).

O objetivo √© compartilhar um pouco de conhecimento e dos meus estudos.

Let‚Äôs go!


    
    
    Please enable JavaScript to view the comments powered by Disqus.



        </description>
        <pubDate>Sun, 29 May 2011 00:00:00 -0300</pubDate>
        <link>http://localhost:4000/2011-05-29-hello-world/</link>
        <guid isPermaLink="true">http://localhost:4000/2011-05-29-hello-world/</guid>
      </item>
    
  </channel>
</rss>
